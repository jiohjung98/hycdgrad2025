<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Interactive Background</title>
    <meta name="description" content="p5.js reactive background" />
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.3/lib/p5.min.js"></script>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100dvh;
        font-family: "Pretendard", sans-serif;
        overflow: hidden;
        background-color: #000;
        position: fixed;
        top: 0;
        left: 0;
        overscroll-behavior: none;
        -webkit-overflow-scrolling: touch;
        touch-action: none;
      }

      /* p5.js 캔버스 */
      #bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      /* Coming Soon 텍스트 */
      .coming-soon {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-family: "Pretendard", sans-serif;
        font-weight: 600;
        text-align: center;
        z-index: 10;
        transition: top 0.2s ease, font-size 0.2s ease, color 0.2s ease;
      }

      /* Footer */
      .footer {
        position: fixed;
        bottom: 30px;
        left: 0;
        width: 100%;
        z-index: 10;
        color: #ccf3f1;
        padding: 0;
        box-sizing: border-box;
        max-height: calc(100dvh - 30px);
        overflow: hidden;
      }

      .footer-container {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 15.66px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .footer-text div {
        margin: 0;
        color: #FDFBED;
        font-family: "Pretendard", sans-serif;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 140%; /* 19.6px */
        leading-trim: both;
        text-edge: cap;
      }

      .copyright {
        color: #FDFBED;
        font-family: "Pretendard", sans-serif;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 140%; /* 19.6px */
        leading-trim: both;
        text-edge: cap;
      }

      .footer-icons {
        display: flex;
        align-items: center;
        gap: 15.66px;
      }

      .icon {
        display: block;
        height: auto;
      }

      .icon1 {
        width: 42.023px;
        height: 40.978px;
        flex-shrink: 0;
      }
      .icon2 {
        width: 37.113px;
        height: 37.113px;
        flex-shrink: 0;
      }

      /* 모바일 스타일 (768px 이하) */
      @media (max-width: 768px) {
        .footer-container {
          gap: 12.22px; /* 아이콘과 텍스트 간격 */
        }

        .footer-icons {
          gap: 10.49px; /* 아이콘들 간 간격 */
        }

        .footer-text div {
          color: #FDFBED;
          font-family: "Pretendard", sans-serif;
          font-size: 10px;
          font-style: normal;
          font-weight: 500;
          line-height: 140%; /* 14px */
          leading-trim: both;
          text-edge: cap;
        }

        .copyright {
          color: #FDFBED;
          font-family: "Pretendard", sans-serif;
          font-size: 10px;
          font-style: normal;
          font-weight: 500;
          line-height: 140%; /* 14px */
          leading-trim: both;
          text-edge: cap;
        }

        .icon1 {
          width: 28.143px;
          height: 27.447px;
          flex-shrink: 0;
        }

        .icon2 {
          width: 26.3px;
          height: 26.3px;
          flex-shrink: 0;
        }
      }

    </style>
  </head>
  <body>
    <div id="bg"></div>
    <script src="./art2.js"></script>
    <!-- <div class="coming-soon" id="comingSoon">Coming Soon 10/22</div> -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-icons">
          <img src="/landing_footericon1.svg" alt="HYCD Icon" class="icon icon1" />
          <img
            src="/landing_footericon2.svg"
            alt="Hanyang University Seal"
            class="icon icon2"
          />
        </div>
        <div class="footer-text">
          <div>2025 한양대학교 ERICA 디자인대학</div>
          <div class="copyright">커뮤니케이션디자인학과 졸업전시회</div>
        </div>
      </div>
    </footer>

    <script>
      // 모바일 스크롤 완전 차단
      document.addEventListener('DOMContentLoaded', function() {
        // 뷰포트 높이 설정
        function setViewportHeight() {
          const vh = window.innerHeight * 0.01;
          document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        setViewportHeight();
        
        // 모든 이벤트 차단
        document.addEventListener('touchmove', function(e) {
          e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('wheel', function(e) {
          e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('scroll', function(e) {
          e.preventDefault();
          window.scrollTo(0, 0);
        }, { passive: false });
        
        // 스크롤 위치 강제 고정
        function lockScroll() {
          window.scrollTo(0, 0);
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }
        
        // 이벤트 리스너
        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', setViewportHeight);
        
        // 주기적 스크롤 고정
        setInterval(lockScroll, 100);
      });

      const coming = document.getElementById("comingSoon");
      const footer = document.querySelector(".footer");

      function updateComingPosition() {
        const windowWidth = window.innerWidth;
        const windowHeight = window.innerHeight;
        const baseWidth = 1920;

        // footer의 실제 위치 계산 (bottom: 40px이므로)
        const footerTop = windowHeight - 40; // footer의 top 위치
        const footerHeight = footer.offsetHeight; // footer의 실제 높이
        const footerTopEdge = footerTop - footerHeight; // footer의 상단 위치

        let topPos;

        if (windowWidth >= 1920) {
          // 1920 이상일 때: footer 내부 텍스트/아이콘과 동일 선상에 위치
          topPos = footerTopEdge;
        } else {
          // 화면이 작아질수록 점점 위로 올라감
          const ratio = windowWidth / baseWidth;

          // 최대 올라갈 수 있는 높이: 화면 하단으로부터 30%
          const maxAllowedTop = windowHeight * 0.6; // 하단으로부터 30% = 상단으로부터 70%

          // 위치 범위 설정
          const minTop = footerTopEdge; // 최소 위치 (footer와 같은 선상)
          const maxTop = maxAllowedTop; // 최대 위치 (하단으로부터 30%)

          // ratio가 1(1920px)일 때 minTop, ratio가 0(0px)일 때 maxTop
          topPos = minTop + (maxTop - minTop) * (1 - ratio);
        }

        coming.style.top = `${topPos}px`;

        // 글자 크기 변화 (44px -> 24px)
        const fontSize = Math.max(
          24,
          44 * Math.min(1, windowWidth / baseWidth)
        );
        coming.style.fontSize = `${fontSize}px`;
        coming.style.lineHeight = `${fontSize * 1.32}px`;

        // 색상 변화
        if (windowWidth >= 1920) {
          // 1920 이상일 때: 흰색 고정
          coming.style.color = "#EEEDDE";
        } else {
          // 위치에 따른 색상 변화 (위로 올라갈수록 빨간색)
          const startColor = { r: 238, g: 237, b: 222 }; // #EEEDDE (흰색)
          const endColor = { r: 221, g: 71, b: 72 }; // #DD4748 (빨간색)

          // 위치에 따른 색상 변화 (footer에서 maxTop까지)
          const minTop = footerTopEdge; // 최소 위치 (footer와 같은 선상)
          const maxTop = windowHeight * 0.6; // 최대 위치 (하단으로부터 40%)
          const colorRatio = Math.min(1, (topPos - minTop) / (maxTop - minTop)); // 0(footer) ~ 1(maxTop)

          const r = Math.round(
            startColor.r * (1 - colorRatio) + endColor.r * colorRatio
          );
          const g = Math.round(
            startColor.g * (1 - colorRatio) + endColor.g * colorRatio
          );
          const b = Math.round(
            startColor.b * (1 - colorRatio) + endColor.b * colorRatio
          );
          coming.style.color = `rgb(${r},${g},${b})`;
        }
      }

      window.addEventListener("resize", updateComingPosition);
      updateComingPosition();
    </script>
  </body>
</html>
